<div ng-include="'main/_/top.html'"></div>

<!--<script type="text/ng-template" id="auth-endpoint-popup.html">-->
    <!--<div>-->
        <!--<ol style="padding-left:10px;">-->
            <!--<li>{{'auth.eptpl.popup.msg1'|translate}}</li>-->
            <!--<li>{{'auth.eptpl.popup.msg2'|translate}}<code>http://oss-cn-hangzhou-zmf.aliyuncs.com</code></li>-->
        <!--</ol>-->
    <!--</div>-->
<!--</script>-->

<!--<script type="text/ng-template" id="auth-preosspath-popup.html">-->
<!--<div>-->
<!--<ol style="padding-left:10px;">-->
<!--<li>{{'auth.presetOssPath.popup.msg1'|translate}}</li>-->
<!--<li>{{'auth.presetOssPath.popup.msg2'|translate}}</li>-->
<!--</ol>-->
<!--</div>-->
<!--</script>-->

<!--<script type="text/ng-template" id="auth-remember-popup.html">-->
<!--<div>-->
<!--{{'auth.remember.popup.msg1'|translate}}-->
<!--</div>-->
<!--</script>-->


<div style="overflow:auto;height:100%">

    <div class="clearfix" style="height:40px;"></div>

    <div class="col-sm-8 col-sm-offset-2">
        <div class="panel panel-default shadow10">
            <!-- <div class="panel-heading">
            AK登录
             </div> -->
            <div class="panel-heading pd0" style="border:0">

                <ul class="nav nav-tabs">
                    <li role="presentation" ng-class="{active:gtab==1}"><a href="" ng-click="gtab=1">
                        {{'auth.login'|translate}}
                        <!-- 登录 -->
                    </a></li>
                    <li role="presentation" ng-class="{active:gtab==2}"><a href="" ng-click="gtab=2">
                        {{'auth.register'|translate}}
                        <!-- 注册 -->
                    </a></li>
                </ul>

            </div>
            <div class="panel-body">

                <form ng-if="gtab==1" class="form-horizontal" name="form1" ng-submit="login(form1)">
                    <!--<div class="form-group">-->
                    <!--<label for="endpoint" class="col-sm-4 control-label"><span class="red">*</span> Endpoint:-->
                    <!--<span uib-popover-template="'auth-endpoint-popup.html'"-->
                    <!--popover-trigger="'mouseenter'" popover-append-to-body="true">-->
                    <!--<i class="fa fa-question-circle"></i>-->
                    <!--</span>-->
                    <!--</label>-->
                    <!--<div class="col-sm-8" style="padding:0">-->

                    <!--<div ng-class="{'col-sm-12':eptplType=='default','col-sm-4':eptplType=='customize'}">-->
                    <!--<select class="form-control" ng-model="eptplType" ng-change="eptplChange(eptplType)">-->
                    <!--<option value="default">{{'default'|translate}} ({{'public.cloud'|translate}})</option>-->
                    <!--<option value="customize">{{'customize'|translate}}</option>-->
                    <!--</select>-->
                    <!--</div>-->
                    <!--<div class="col-sm-8" style="padding-left:0" ng-if="eptplType=='customize'"-->
                    <!--ng-class="{'has-error':!form1.endpoint.$valid}">-->
                    <!--<input type="text" required ng-model="item.eptpl" ng-pattern="/^http(s)?\:\/\//"-->
                    <!--class="form-control" id="endpoint" name="endpoint" placeholder="http://">-->
                    <!--</div>-->


                    <!--</div>-->
                    <!--</div>-->
                    <div class="form-group has-feedback" ng-class="{'has-error': !form1.user.$valid }">
                        <label for="user" class="col-sm-4 control-label"><span class="red">*</span> {{'user'|translate}}</label>
                        <div class="col-sm-8">
                            <input type="text" required ng-model="item.user"
                                   class="form-control" id="user" name="user"
                                   placeholder="{{'auth.id.placeholder'|translate}}">
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{'has-error': !form1.pass.$valid }">
                        <label for="pass" class="col-sm-4 control-label"><span class="red">*</span> {{'pass'|translate}}</label>
                        <div class="col-sm-8">
                            <input type="password" required ng-model="item.pass"
                                   class="form-control" id="pass" name="pass"
                                   placeholder="{{'auth.secret.placeholder'|translate}}">
                        </div>
                    </div>

                    <!--<div ng-if="item.id.indexOf('STS.')==0" class="form-group has-feedback" ng-class="{'has-error': !form1.stoken.$valid }">-->
                    <!--<label for="stoken" class="col-sm-4 control-label"> STS Token:</label>-->
                    <!--<div class="col-sm-8">-->
                    <!--<input type="text" required ng-model="item.stoken"-->
                    <!--class="form-control" id="stoken" name="stoken" placeholder="{{'auth.stoken.placeholder'|translate}}">-->
                    <!--</div>-->
                    <!--</div>-->


                    <!--<div class="form-group" ng-class="{'has-error': !form1.osspath.$valid }">-->
                    <!--<label for="input3" class="col-sm-4 control-label">-->
                    <!--{{'auth.presetOssPath'|translate}}:-->
                    <!--&lt;!&ndash; 预设OSS路径(可选): &ndash;&gt;-->
                    <!--<span uib-popover-template="'auth-preosspath-popup.html'"-->
                    <!--popover-trigger="'mouseenter'" popover-append-to-body="true">-->
                    <!--<i class="fa fa-question-circle"></i>-->
                    <!--</span>-->
                    <!--</label>-->
                    <!--<div class="col-sm-8">-->
                    <!--<input type="text" name="osspath" ng-pattern="reg_osspath" ng-model="item.osspath"-->
                    <!--class="form-control" id="input3" placeholder="{{'auth.presetOssPath.placeholder'|translate}}">-->
                    <!--</div>-->
                    <!--</div>-->


                    <!--<div class="form-group" ng-if="item.osspath && item.eptpl.indexOf('{region}')!=-1">-->
                    <!--<label for="input4" class="col-sm-4 control-label">-->
                    <!--&lt;!&ndash; <span class="red">*</span> &ndash;&gt;-->
                    <!--{{'region'|translate}}:-->
                    <!--&lt;!&ndash; 区域: &ndash;&gt;-->
                    <!--</label>-->
                    <!--<div class="col-sm-8">-->
                    <!--<select required ng-model="item.region"-->
                    <!--class="form-control" id="input4" placeholder="{{'auth.region.placeholder'|translate}}"-->
                    <!--ng-options="rg.id as ('region.'+rg.id|translate) for rg in regions">-->
                    <!--</select>-->
                    <!--</div>-->
                    <!--</div>-->


                    <!--<div class="form-group">-->
                    <!--<label for="input5" class="col-sm-4 control-label">-->
                    <!--{{'auth.description'|translate}}:-->
                    <!--&lt;!&ndash; 备注(最多30个字): &ndash;&gt;-->
                    <!--</label>-->
                    <!--<div class="col-sm-8">-->
                    <!--<input type="text" ng-model="item.desc" maxlength="30"-->
                    <!--class="form-control" id="input5" placeholder="{{'auth.description.placeholder'|translate}}">-->
                    <!--</div>-->
                    <!--</div>-->

                    <div class="form-group">
                        <div class="col-sm-offset-4 col-sm-8">
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox" ng-model="flags.remember"
                                           ng-true-value="'YES'" ng-false-value="'NO'">
                                    {{'auth.remember'|translate}}
                                    <!-- 记住秘钥 -->

                                    <!--<span uib-popover-template="'auth-remember-popup.html'"-->
                                    <!--popover-trigger="'mouseenter'" popover-append-to-body="true">-->
                                    <!--<i class="fa fa-question-circle"></i>-->
                                    <!--</span>-->
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-sm-offset-4 col-sm-8">
                            <button type="submit" class="btn btn-primary">
                                {{'auth.login'|translate}}
                                <!-- 登入 -->
                            </button>

                            <button type="button" class="btn btn-default" ng-model="flags.showHis"
                                    uib-btn-checkbox btn-checkbox-true="'YES'" btn-checkbox-false="'NO'">
                                {{'auth.userHistories'|translate}}
                                <!-- 登录历史 -->
                            </button>

                        </div>
                    </div>
                </form>


                <form ng-if="gtab==2" class="form-horizontal" name="form2" ng-submit="register(form2)">

                    <div class="form-group has-feedback" ng-class="{'has-error': !form2.user.$valid }">
                        <label for="user" class="col-sm-4 control-label"><span class="red">*</span> {{'user'|translate}}</label>
                        <div class="col-sm-8">
                            <input type="text" required ng-model="item.user"
                                   class="form-control" id="user" name="user"
                                   placeholder="{{'auth.id.placeholder'|translate}}">
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{'has-error': !form2.pass.$valid }">
                        <label for="pass" class="col-sm-4 control-label"><span class="red">*</span> {{'pass'|translate}}</label>
                        <div class="col-sm-8">
                            <input type="password" required ng-model="item.pass"
                                   class="form-control" id="pass" name="pass"
                                   placeholder="{{'auth.secret.placeholder'|translate}}">
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{'has-error': !form2.confirm_pass.$valid }">
                        <label for="confirm_pass" class="col-sm-4 control-label"><span class="red">*</span> {{'confirm_pass'|translate}}</label>
                        <div class="col-sm-8">
                            <input type="password" required ng-model="item.confirm_pass"
                                   class="form-control" id="confirm_pass" name="confirm_pass"
                                   placeholder="{{'auth.confirm.secret.placeholder'|translate}}">
                        </div>
                    </div>
                    <div class="form-group has-feedback" ng-class="{'has-error': !form2.realName.$valid }">
                        <label for="realName" class="col-sm-4 control-label"><span class="red">*</span>
                            {{'realName'|translate}}</label>
                        <div class="col-sm-8">
                            <input type="text" required ng-model="item.realName"
                                   class="form-control" id="realName" name="realName"
                                   placeholder="{{'auth.realName.placeholder'|translate}}">
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-sm-offset-3 col-sm-9">
                            <button ng-disabled="!form2.$valid" type="submit"
                                    class="btn btn-primary">
                                {{'auth.register'|translate}}
                                <!-- 登入 -->
                            </button>

                        </div>
                    </div>
                </form>


            </div>
        </div>
    </div>

    <div class="clearfix"></div>


    <div ng-if="gtab==1" class="col-xs-12" ng-show="flags.showHis=='YES'">
        <header>
            <h4 class="col-xs-6">
                {{'auth.userHistories'|translate}}
                <!-- AK历史 -->
            </h4>
            <div class="col-xs-6">
                <a href="" ng-click="showCleanHistories()" class="pull-right text-danger"
                   style="padding-top:10px;">
                    {{'auth.clearHistories'|translate}}
                    <!-- 清空历史 -->
                </a>
            </div>
        </header>
        <table class="table table-condensed table-striped table-bordered">
            <tr>
                <th>{{'user'|translate}}</th>
                <th>{{'pass'|translate}}</th>
                <th>{{'actions'|translate}}</th>
            </tr>
            <tr ng-repeat="h in his">
                <td>{{h.user}}</td>
                <td>{{h.pass|hideSecret}}</td>
                <td>
                    <a href="" ng-click="useHis(h)">{{'use'|translate}}</a> |
                    <a href="" ng-click="showRemoveHis(h)" class="text-danger">{{'delete'|translate}}</a>
                </td>
            </tr>
        </table>
    </div>
    <div class="clearfix"></div>
</div>
